(this["webpackJsonpreact-note-application"]=this["webpackJsonpreact-note-application"]||[]).push([[0],{39:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),s=n(11),i=n.n(s),o=(n(39),n(9)),r=n.n(o),d=n(3),u=n(2),l="FETCH_NOTES",j="ADD_NOTE",p="DELETE_NOTE",O="EDIT_NOTE_TEXT",b="DELETE_TAG",f="TOGGLE_POPUP",x="TOGGLE_EDIT_POPUP",m="CHANGE_MODE",g="ADD_TAG",_="FILTER_NOTES",h=function(t){return{type:l,payload:t}},v=function(t){return{type:m,payload:t}},E=function(t){return{type:j,payload:t}},N=function(t){return{type:p,payload:t}},y=function(t,e){return{type:b,payload:{id:t,noteId:e}}},I=function(t,e,n){return{type:f,payload:{noteIndex:t,idOfNote:e,lastTagId:n}}},T=function(t){return{type:x,payload:t}},D=function(t,e,n){return{type:g,payload:Object(u.a)(Object(u.a)({},t),{},{tagText:e,uniqueTagID:n})}},k="https://reactnotesapplication-default-rtdb.firebaseio.com",C=n(4),w=n.n(C),P=n(10),M=n(12),L=n(0),R=function(){var t=Object(d.c)((function(t){return t.isEditPopupOpened})),e=Object(d.c)((function(t){return t.noteToEdit})),n=Object(d.b)(),c=Object(a.useRef)(),s=Object(a.useState)(),i=Object(M.a)(s,2),o=i[0],u=i[1];Object(a.useEffect)((function(){c.current.value=e.noteText,u(e.noteText),c.current.focus()}),[t]);var l=function(){var t=Object(P.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.patch("".concat(k,"/notes/").concat(e.noteId,".json"),{text:o});case 2:t.sent,a={noteId:e.noteId,noteIndex:e.noteIndex,modifiedText:o},n({type:O,payload:a}),n(T({noteId:null,noteIndex:null,noteText:""}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsx)("div",{className:"popup",style:{display:t?"block":"none"},children:Object(L.jsx)("div",{className:"popup__body",children:Object(L.jsxs)("div",{className:"popup__content",children:[Object(L.jsx)("div",{className:"popup__close",onClick:function(){n(T({noteId:null,noteIndex:null,noteText:""}))},children:Object(L.jsx)("img",{src:"https://img.icons8.com/metro/52/26e07f/delete-sign.png"})}),Object(L.jsx)("div",{className:"popup__input",children:Object(L.jsx)("input",{type:"text",className:"input_in_popup",ref:c,onChange:function(t){return u(t.target.value.trim())}})}),Object(L.jsx)("button",{className:"add_edit_tag",onClick:function(){return l()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})})})},A=function(){return Object(L.jsx)("h1",{className:"empty",children:"\u0417\u0430\u043c\u0435\u0442\u043e\u043a \u043d\u0435\u0442..."})};var F=function(){return Object(L.jsx)("header",{className:"header",children:Object(L.jsxs)("h1",{className:"animate__animated animate__fadeInLeftBig",children:["\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0437\u0430\u043c\u0435\u0442\u043e\u043a \u0441 ",Object(L.jsx)("span",{className:"header__tag",children:"#\u0442\u0435\u0433\u0430\u043c\u0438"})]})})},S=function(){return Object(L.jsx)("div",{className:"loader-wrapper",children:Object(L.jsxs)("div",{className:"lds-spinner",children:[Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{}),Object(L.jsx)("div",{})]})})},G=n(67),q=n(66),z=function(t){var e=t.tags;return Object(L.jsx)(G.a,{className:"tags_to_add",children:e.map((function(t,e){return Object(L.jsx)(q.a,{classNames:"tag",timeout:400,unmountOnExit:!0,children:Object(L.jsx)("span",{className:"tag_to_add",children:t})},e)}))})},U=function(){var t=Object(d.b)(),e=Object(a.useState)(""),n=Object(M.a)(e,2),c=n[0],s=n[1],i=Object(a.useState)([]),o=Object(M.a)(i,2),l=o[0],j=o[1],p=Object(a.useRef)(),O=Object(d.c)((function(t){return t.mode}));Object(a.useEffect)((function(){p.current.focus()}),[O]);var b=function(t){var e=t.split(" ").filter((function(t){if(t.includes("#"))return t})).map((function(t){if(t.includes("#")){var e=t.split("#").splice(1);return e.includes("")?e.filter((function(t){return""!==t})):e}})).join(",").split(",").filter((function(t){return""!==t}));return j(e)},f=function(){var e=Object(P.a)(w.a.mark((function e(){var n,a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={text:c,date:(new Date).toLocaleDateString(),tags:l.map((function(t,e){return{title:t,tagId:e}}))},e.next=3,r.a.post("".concat(k,"/notes.json"),n);case 3:a=e.sent,i=Object(u.a)(Object(u.a)({},n),{},{tags:l.map((function(t,e){return{title:t,tagId:e,id:a.data.name}})),id:a.data.name}),t(E(i)),s(""),p.current.value="",j([]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{className:"notes__creator animate__animated animate__tada animate__delay-2s",children:[Object(L.jsx)("input",{type:"text",className:"notes__creator-input",onChange:function(e){var n;"CREATE_MODE"===O?(b(e.target.value.trim()),s(e.target.value.trim())):(b(e.target.value.trim()),s(e.target.value.trim()),t((n=e.target.value.trim(),{type:_,payload:n})))},ref:p}),Object(L.jsx)("button",{className:"notes__creator-add ".concat("CREATE_MODE"===O?"active":""),onClick:function(){"FILTER_MODE"===O?t(v("CREATE_MODE")):f()},disabled:"CREATE_MODE"===O&&""===c.trim(),children:"+"}),Object(L.jsx)("button",{className:"notes__creator-search ".concat("FILTER_MODE"===O?"active":""),onClick:function(){return t(v("FILTER_MODE"))},children:Object(L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"50",height:"50",viewBox:"0 0 172 172",style:{fill:"#26e07f"},children:Object(L.jsxs)("g",{fill:"none",fillRule:"nonzero",stroke:"none",strokeWidth:"1",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"10",strokeDasharray:"",strokeDashoffset:"0",fontFamily:"none",fontWeight:"none",fontSize:"none",textAnchor:"none",style:{mixBlendMode:"normal"},children:[Object(L.jsx)("path",{d:"M0,172v-172h172v172z",fill:"none"}),Object(L.jsx)("g",{fill:"FILTER_MODE"===O?"#FFFFFF":"#17b978",children:Object(L.jsx)("path",{d:"M72.24,10.32c-32.33062,0 -58.48,26.14938 -58.48,58.48c0,32.33063 26.14938,58.48 58.48,58.48c11.54281,0 22.22563,-3.38625 31.2825,-9.1375l42.2475,42.2475l14.62,-14.62l-41.71,-41.6025c7.49813,-9.83625 12.04,-22.02406 12.04,-35.3675c0,-32.33062 -26.14937,-58.48 -58.48,-58.48zM72.24,24.08c24.76531,0 44.72,19.95469 44.72,44.72c0,24.76531 -19.95469,44.72 -44.72,44.72c-24.76531,0 -44.72,-19.95469 -44.72,-44.72c0,-24.76531 19.95469,-44.72 44.72,-44.72z"})})]})})})]}),Object(L.jsx)(z,{tags:l})]})},B=function(){var t=Object(d.c)((function(t){return t.notes})),e=Object(d.c)((function(t){return t.filteredNotes})),n=Object(d.c)((function(t){return t.mode})),a=Object(d.b)(),c=function(){var t=Object(P.a)(w.a.mark((function t(e){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.delete("".concat(k,"/notes/").concat(e,".json"));case 2:a(N(e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(P.a)(w.a.mark((function t(e,n,c){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==c){t.next=5;break}return t.next=3,r.a.delete("".concat(k,"/notes/").concat(e,"/tags/").concat(n,".json"));case 3:t.next=7;break;case 5:return t.next=7,r.a.delete("".concat(k,"/notes/").concat(e,"/tags/").concat(c,".json"));case 7:a(y(n,e));case 8:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),i=function(t,e,n){a(I(t,e,n))},o=function(t,e,n){a(T({noteIndex:t,noteId:e,noteText:n}))};return Object(L.jsx)(G.a,{className:"notes__list",children:"CREATE_MODE"===n?t.map((function(t,e){return Object(L.jsx)(q.a,{classNames:"note",timeout:400,appear:!0,unmountOnExit:!0,children:Object(L.jsxs)("div",{className:"notes__list-item",children:[Object(L.jsx)("button",{className:"delete__button",onClick:function(){return c(t.id)},children:"\u2716"}),Object(L.jsx)("button",{className:"edit__button",onClick:function(){return o(e,t.id,t.text)},children:"\u270e"}),Object(L.jsx)("button",{className:"add-tag__button",onClick:function(){return i(e,t.id,0!==t.tags.length?t.tags[t.tags.length-1].tagId:-1)},children:"+"}),Object(L.jsxs)("div",{className:"notes__list-item-content",children:[Object(L.jsx)("div",{className:"notes__list-item-text",children:t.text}),Object(L.jsx)("div",{className:"notes__list-item-date",children:t.date})]}),Object(L.jsx)("div",{className:"notes__list-item-tags",children:t.tags.map((function(t,e){if(t)return Object(L.jsxs)("span",{className:"tag",children:[t.title,Object(L.jsx)("img",{onClick:function(){return s(t.id,t.tagId,t.uniqueTagID)},className:"delete__tag",src:"https://img.icons8.com/ios-glyphs/30/ffffff/delete-sign.png",alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},e)}))})]},e)},e)})):e.map((function(t,e){return Object(L.jsx)(q.a,{classNames:"note",timeout:400,appear:!0,unmountOnExit:!0,children:Object(L.jsxs)("div",{className:"notes__list-item",children:[Object(L.jsx)("button",{className:"delete__button",onClick:function(){return c(t.id)},children:"\u2716"}),Object(L.jsx)("button",{className:"edit__button",onClick:function(){return o(e,t.id,t.text)},children:"\u270e"}),Object(L.jsx)("button",{className:"add-tag__button",onClick:function(){return i(e,t.id,0!==t.tags.length?t.tags[t.tags.length-1].tagId:-1)},children:"+"}),Object(L.jsxs)("div",{className:"notes__list-item-content",children:[Object(L.jsx)("div",{className:"notes__list-item-text",children:t.text}),Object(L.jsx)("div",{className:"notes__list-item-date",children:t.date})]}),Object(L.jsx)("div",{className:"notes__list-item-tags",children:t.tags.map((function(t,e){if(t)return Object(L.jsxs)("span",{className:"tag",children:[t.title,Object(L.jsx)("img",{onClick:function(){return s(t.id,t.tagId,t.uniqueTagID)},className:"delete__tag",src:"https://img.icons8.com/ios-glyphs/30/ffffff/delete-sign.png",alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},e)}))})]},e)},e)}))})},X=function(){var t=Object(d.c)((function(t){return t})),e=t.isPopupOpened,n=t.tagToAdd,c=Object(a.useState)(""),s=Object(M.a)(c,2),i=s[0],o=s[1],u=Object(d.b)(),l=Object(a.useRef)();Object(a.useEffect)((function(){l.current.value="",l.current.focus()}),[e]);var j=function(){var t=Object(P.a)(w.a.mark((function t(){var e,a,c,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.idOfNote,a=n.lastTagId,c={tagId:a+1,title:i},t.next=4,r.a.post("".concat(k,"/notes/").concat(e,"/tags.json"),c);case 4:s=t.sent,u(D(n,i,s.data.name)),u(I()),o("");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsx)("div",{className:"popup",style:{display:e?"block":"none"},children:Object(L.jsx)("div",{className:"popup__body",children:Object(L.jsxs)("div",{className:"popup__content",children:[Object(L.jsx)("div",{className:"popup__close",onClick:function(){u(I())},children:Object(L.jsx)("img",{src:"https://img.icons8.com/metro/52/26e07f/delete-sign.png"})}),Object(L.jsx)("div",{className:"popup__input",children:Object(L.jsx)("input",{type:"text",className:"input_in_popup",ref:l,onChange:function(t){return o(t.target.value.trim())}})}),Object(L.jsx)("button",{className:"add_tag",onClick:function(){return j()},disabled:""===i,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u0433"})]})})})},H=function(t,e,n){var a,c,s;return e&&0!==t.length?a=Object(L.jsx)(B,{}):e&&0===t.length?a=Object(L.jsx)(A,{}):e||(a=Object(L.jsx)(S,{})),c=a,s=n,document.body.style.overflow=s.isPopupOpened||s.isEditPopupOpened?"hidden":"",Object(L.jsxs)("div",{children:[Object(L.jsx)(F,{}),Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"notes",children:[Object(L.jsx)(U,{}),c]})}),Object(L.jsx)(X,{}),Object(L.jsx)(R,{})]})};var J=function(){var t=Object(d.b)(),e=Object(d.c)((function(t){return t.isLoaded})),n=Object(d.c)((function(t){return{isPopupOpened:t.isPopupOpened,isEditPopupOpened:t.isEditPopupOpened}})),c=Object(d.c)((function(t){return t.notes}));return Object(a.useEffect)((function(){r.a.get("".concat(k,"/notes.json")).then((function(e){e.data?t(h(e.data)):t(h([]))}))}),[]),H(c,e,n)},W=n(14),V=n(5),K={mode:"CREATE_MODE",notes:[],filteredNotes:[],isLoaded:!1,isPopupOpened:!1,isEditPopupOpened:!1,isFilterPopupOpened:!1,tagToAdd:{noteIndex:null,noteId:null},noteToEdit:{noteId:null,noteIndex:null,noteText:""}},Q=n(32),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.c,Z=Object(W.d)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:var n=Object.keys(e.payload).map((function(t){var n=t;return{id:n,text:e.payload[t].text,date:e.payload[t].date,tags:e.payload[t].tags?Object.entries(e.payload[t].tags).map((function(t){return{uniqueTagID:t[0],title:t[1].title,tagId:t[1].tagId,id:n}})):[]}}));return Object(u.a)(Object(u.a)({},t),{},{notes:[].concat(Object(V.a)(t.notes),Object(V.a)(n)),filteredNotes:Object(V.a)(n),isLoaded:!0});case m:return Object(u.a)(Object(u.a)({},t),{},{mode:"CREATE_MODE"===e.payload?"CREATE_MODE":"FILTER_MODE"});case j:var a=e.payload;return Object(u.a)(Object(u.a)({},t),{},{notes:[].concat(Object(V.a)(t.notes),[a]),filteredNotes:[].concat(Object(V.a)(t.filteredNotes),[a])});case p:var c=e.payload;return Object(u.a)(Object(u.a)({},t),{},{notes:Object(V.a)(t.notes.filter((function(t){return t.id!==c}))),filteredNotes:Object(V.a)(t.filteredNotes.filter((function(t){return t.id!==c})))});case O:var s=t.notes.map((function(t,n){return t.id===e.payload.noteId&&n===e.payload.noteIndex?Object(u.a)(Object(u.a)({},t),{},{text:e.payload.modifiedText}):t}));return Object(u.a)(Object(u.a)({},t),{},{notes:Object(V.a)(s),filteredNotes:Object(V.a)(s)});case b:var i=e.payload,o=i.id,r=i.noteId,d=t.notes.map((function(t){return t.id===r?Object(u.a)(Object(u.a)({},t),{},{tags:t.tags.filter((function(t){if(null!==t&&void 0!==t)return t.tagId!==o}))}):t}));return Object(u.a)(Object(u.a)({},t),{},{notes:Object(V.a)(d),filteredNotes:Object(V.a)(d)});case f:var h=e.payload,v=h.noteIndex,E=h.idOfNote,N=h.lastTagId;return Object(u.a)(Object(u.a)({},t),{},{isPopupOpened:!t.isPopupOpened,tagToAdd:{noteIndex:v,idOfNote:E,lastTagId:N}});case x:var y=e.payload,I=y.noteId,T=y.noteIndex,D=y.noteText;return Object(u.a)(Object(u.a)({},t),{},{isEditPopupOpened:!t.isEditPopupOpened,noteToEdit:{noteId:I,noteIndex:T,noteText:D}});case g:var k=e.payload,C=k.idOfNote,w=k.noteIndex,P=k.tagText,M=k.uniqueTagID,L=0!==t.notes[w].tags.length?t.notes[w].tags[t.notes[w].tags.length-1].tagId:-1,R={title:P,tagId:L+1,id:C,uniqueTagID:M},A=t.notes.map((function(t,e){return w===e&&t.id===C?Object(u.a)(Object(u.a)({},t),{},{tags:[].concat(Object(V.a)(t.tags),[R])}):t}));return Object(u.a)(Object(u.a)({},t),{},{notes:A,filteredNotes:A});case _:var F=e.payload,S=t.notes.filter((function(t){return 0===t.tags.length?[!1]:t.tags.map((function(t){return t.title.toLowerCase().includes(F.toLowerCase())||t.title.toUpperCase().includes(F.toUpperCase())})).includes(!0)}));return Object(u.a)(Object(u.a)({},t),{},{filteredNotes:Object(V.a)(S)});default:return t}}),Y(Object(W.a)(Q.a)));i.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(d.a,{store:Z,children:Object(L.jsx)(J,{})})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.d1d9d552.chunk.js.map